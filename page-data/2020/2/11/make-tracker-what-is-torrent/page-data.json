{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2020/2/11/make-tracker-what-is-torrent","result":{"data":{"content":{"edges":[{"node":{"id":"f88f5f28-3b7e-5737-a5bc-1368188d3336","html":"<p>문득 트래커를 만들어 보고싶었다. 예전에 토렌트를 한창 썼을때 매번 토렌트를 쓸 때마다, 'yyyy년 mm월 트래커 리스트' 이런식으로 써있는 데에서,<br>\n알 수 없는 사이트 목록을 트래커랍시고 복사해다가 다운로드 받아야할 토렌트 파일에 붙여넣기를 하곤 했다.</p>\n<p>뭐 굳이 알아야하냐? 하면 할말은 없지만 아는 것이 힘! 이라 하였는데, 한번 직접 만들어보면서 토렌트가 어떻게 돌아가는지 알아보고자 했다.</p>\n<p>먼저, 트래커를 만들기 전에 토렌트란 뭔가? 그리고, 토렌트 네트워크의 참가자는 누구인가?</p>\n<p>그리고, 토렌트가 p2p 공유 중 하나이고, 기본적인 공유방식을 안다하면, 실제 비트토렌트 프로토콜의 정의와, 어떤 request, response 를 주고받는지에 대해 알아볼 것이다.</p>\n<p>이 글은 이러한 이야기를 하기에 앞서 알아야할 전제조건인, '토렌트와 p2p 네트워크 에 대해서' 간단하게 언급해볼 것이다.</p>\n<hr>\n<h1 id=\"먼저-p2p-란-무엇인가\"><a href=\"#%EB%A8%BC%EC%A0%80-p2p-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"먼저 p2p 란 무엇인가 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>먼저, P2P 란 무엇인가?</h1>\n<p>비트토렌트 프로토콜은(토렌트) P2P 통신망을 구축하고 이 위에서 데이터를 주고받는 통신규약이라고 할 수 있다.<br>\n그럼 P2P 란 무엇인가?</p>\n<p>우리가 보통 어떤 데이터를 서버에게서 받을때의 통신망은 아래와 같이 볼 수 있다.</p>\n<p><img src=\"/images/server_client.png\" alt=\"server_client\"></p>\n<p>뭐 게임을해도, 웹사이트를 접속해도 기본적으로 서버가 존재하고 서버에서 데이터를 받는 구조이다.</p>\n<p>클라이언트들이 많아질수록 서버는 부담이 많아질 것이다.</p>\n<p>이와는 다르게, 모든 네트워크 내 참여자가 부담을 분산하고, 서로 데이터를 공유하는 형태가 바로 P2P(Peer to Peer) 네트워크이다.</p>\n<p><img src=\"/images/peer_network.png\" alt=\"peer_to_peer\"></p>\n<p>P2P 네트워크는 위와 같은 구조라고 보면 된다. 네트워크 내 참여자가 서버이면서 클라이언트가 된다.<br>\n이 경우, 전체 네트워크의 부담은 각 참여자의 처리능력과 대역폭에 의해 결정될 것이다.</p>\n<h1 id=\"그래서-토렌트는-무엇인가\"><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-%ED%86%A0%EB%A0%8C%ED%8A%B8%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"그래서 토렌트는 무엇인가 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그래서, 토렌트는 무엇인가?</h1>\n<p>토렌트는 P2P 네트워크를 정의하고 데이터를 공유하는 하나의 규약이다.<br>\n정확하게는 비트토렌트 프로토콜을 뜻한다. 비트토렌트는 <a href=\"https://ko.wikipedia.org/wiki/%EB%B8%8C%EB%9E%A8_%EC%BD%94%EC%96%B8\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">브람 코헨</a> 에 의해 만들어졌다.</p>\n<p>어떻게 보면 이 비트토렌트 프로토콜을 통해 파일을 공유하는 프로그램을 뜻할 수도 있겠다. 비트토렌트 프로그램을 포함해, uTorrent, deluge 같은 프로그램들 말이다.</p>\n<p>그러므로 토렌트라는 것은, '비트토렌트 규약을 통해 서로 데이터를 공유할 수 있는 P2P 네트워크' 정도라고 생각하면 될 것 같다.</p>\n<h1 id=\"토렌트에서-사용되는-키워드들\"><a href=\"#%ED%86%A0%EB%A0%8C%ED%8A%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94-%ED%82%A4%EC%9B%8C%EB%93%9C%EB%93%A4\" aria-label=\"토렌트에서 사용되는 키워드들 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토렌트에서 사용되는 키워드들</h1>\n<h3 id=\"peer\"><a href=\"#peer\" aria-label=\"peer permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Peer</h3>\n<p>토렌트 네트워크에 참가한 모든 유저를 뜻한다. 이 유저는 두가지로 분류된다.</p>\n<ul>\n<li>Seeder : 시더는 온전한 파일 자체를 가지고 있어서 최종적인 배포가 가능한 유저이다.<br>\n만약 자신이 알고있는 피어중 시더가 한명도 없다면 이 파일은 완전히 다운받지 못할 것이다.</li>\n<li>Leecher : 리처는 그 반대이다. 파일의 조각을 가지고있거나, 하나도 없어서 공유를 받아야할 존재이다.<br>\n물론 리처도 자신이 가지고 있는 조각에 한해서는 공유가 가능하므로, 리처가 많으면 파일을 완전히 받지는 못할망정,\n그 전까지는 많은 이들에게 빠르게 조각을 받을 수 있을 것이다.</li>\n</ul>\n<h3 id=\"torrent-file\"><a href=\"#torrent-file\" aria-label=\"torrent file permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>torrent file</h3>\n<p>어떤 파일목록을 받아야할지, 어디서 피어목록을 요청해야할지등 네트워크 참가에 필요한 정보를 담은 파일이다.<br>\n이 파일을 실행시키면 토렌트 프로그램은 파일에 기록된 정보를 통해 네트워크에 참가하고 피어들과 소통하게 된다.</p>\n<h3 id=\"magnet\"><a href=\"#magnet\" aria-label=\"magnet permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Magnet</h3>\n<p>토렌트파일이 파일로서 정보를 기록했다면, 마그넷은 url 주소로서 이 정보를 기록한 형태이다.<br>\n파일을 굳이 가지고 있지 않더라도 링크를 실행시키는 것으로 토렌트 프로그램이 토렌트 파일을 실행시킨것과 같은 동작을 할 수 있다.</p>\n<h3 id=\"tracker\"><a href=\"#tracker\" aria-label=\"tracker permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tracker</h3>\n<p>특정 파일군 별 피어목록들을 관리해주는 일종의 서버이다. P2P 는 서버가 없다고 했는데.. 서버가 있다?</p>\n<p>물론 실제 공유 동작에서 트래커는 아무일도 하지 않는다.</p>\n<p>하지만 먼저 파일을 공유하기에 앞서, 어떤 이들과 파일을 공유해야할지, 어떤이들에게 조각을 요청해야할지 어떻게 알겠는가?<br>\n그렇기 때문에 한번은 이 트래커라는 곳에 방문해 토렌트 파일에 기록된 값을 보여주며, '이 값과 같은 정보를 공유중인 애들을 알려줘' 하고 물어보는 것이다.</p>\n<p>이 트래커는 모두가 접근할 수 있도록 공개되어있을 수도, 특정 피어들끼리만 공유하도록 폐쇄적으로 운영되고 있을수도 있다.</p>\n<hr>\n<p>이정도면 기본적으로 토렌트가 무엇인지 정도는 알 수 있지 않나 싶다.</p>\n<p>다음 글에서는, 직접 비트토렌트 프로토콜을 확인하고</p>\n<p>이 프로토콜에 맞춰 http 기반 tracker 서버를 구축해볼 예정이다. (트래커는 http, ws, udp 프로토콜을 사용할 수 있다.)</p>\n<p>기술스택은 최근 업무에 사용중인 Nodejs + Typescript 로 해볼 생각이다.</p>","excerpt":"문득 트래커를 만들어 보고싶었다. 예전에 토렌트를 한창 썼을때 매번 토렌트를 쓸 때마다, 'yyyy년 mm…","fields":{"slug":"/2020/2/11/make-tracker-what-is-torrent"},"frontmatter":{"id":"114154c0-4c6a-11ea-adba-f5973d0ff94c","title":"[트래커를 만들어보자] 1. 토렌트란 무엇인가","slug":"/2020/2/11/make-tracker-what-is-torrent","date":"2020-02-11T01:01:42.795Z","headerImage":"/images/bittorrent.jpg"}},"previous":null,"next":null}]}},"pageContext":{"id":"f88f5f28-3b7e-5737-a5bc-1368188d3336","index":0}}}